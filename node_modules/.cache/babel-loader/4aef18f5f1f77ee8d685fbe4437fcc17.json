{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thanh\\\\OneDrive\\\\M\\xE1y t\\xEDnh\\\\vilushop\\\\client\\\\src\\\\components\\\\cart\\\\Cart.jsx\",\n    _s = $RefreshSig$();\n\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle';\nimport axios from 'axios';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { GlobalState } from '../../GlobalState';\nimport PaypalButton from '../payment/PaypalButton';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Cart() {\n  _s();\n\n  const state = useContext(GlobalState);\n  const [token] = state.token;\n  const [cart, setCart] = state.userApi.cart;\n  const [total, setTotal] = useState(0);\n  useEffect(() => {\n    const getTotal = () => {\n      const total = cart.reduce((prev, item) => {\n        return prev + item.price * item.quantity;\n      }, 0);\n      setTotal(total);\n    };\n\n    getTotal();\n  }, [cart]);\n\n  const addToCart = async cart => {\n    await axios.patch('/user/addcart', {\n      cart\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n  };\n\n  const handleIncrease = id => {\n    cart.forEach(item => {\n      if (item._id === id) {\n        item.quantity += 1;\n      }\n    });\n    setCart([...cart]);\n    addToCart(cart);\n  };\n\n  const handleDecrease = id => {\n    cart.forEach(item => {\n      if (item._id === id) {\n        item.quantity === 1 ? item.quantity = 1 : item.quantity -= 1;\n      }\n    });\n    setCart([...cart]);\n    addToCart(cart);\n  };\n\n  const handleDelete = id => {\n    if (window.confirm(\"Do you want to delete this product?\")) {\n      cart.forEach((item, index) => {\n        if (item._id === id) {\n          cart.splice(index, 1);\n        }\n      });\n      setCart([...cart]);\n      addToCart(cart);\n    }\n  };\n\n  const tranSuccess = async payment => {\n    const {\n      paymentID,\n      address\n    } = payment;\n    await axios.post('/api/payment', {\n      cart,\n      paymentID,\n      address\n    }, {\n      headers: {\n        Authorization: token\n      }\n    });\n    setCart([]);\n    addToCart([]);\n    alert('You have successfully placed an order');\n  };\n\n  if (cart.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-center text-2xl\",\n      children: \"Cart Empty\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [cart.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative border border-gray-500 rounded\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: product.images.url,\n        alt: \"\",\n        className: \"max-w-md w-full m-5 h-96 object-cover block\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-lg w-full m-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-3xl uppercase text-blue-700 tracking-widest font-bold\",\n            children: product.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [\"$ \", product.price * product.quantity]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"leading-normal my-2.5 opacity-80\",\n          children: product.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"leading-normal my-2.5 opacity-80\",\n          children: product.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(RemoveCircleIcon, {\n            className: \"cursor-pointer\",\n            color: \"primary\",\n            onClick: () => handleDecrease(product._id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-red-400 py-0 px-5 text-xl\",\n            children: product.quantity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(AddCircleIcon, {\n            className: \"cursor-pointer\",\n            color: \"primary\",\n            onClick: () => handleIncrease(product._id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-0 right-1.5 text-red-400 font-black cursor-pointer\",\n          onClick: () => handleDelete(product._id),\n          children: \"X\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 25\n      }, this)]\n    }, product._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full h-14 flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-red-400\",\n        children: [\"Total: $ \", total]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(PaypalButton, {\n        total: total,\n        tranSuccess: tranSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Cart, \"G3JeC15lvNmKw15RIDDgjAjZnYY=\");\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"sources":["C:/Users/thanh/OneDrive/Máy tính/vilushop/client/src/components/cart/Cart.jsx"],"names":["AddCircleIcon","RemoveCircleIcon","axios","React","useContext","useEffect","useState","GlobalState","PaypalButton","Cart","state","token","cart","setCart","userApi","total","setTotal","getTotal","reduce","prev","item","price","quantity","addToCart","patch","headers","Authorization","handleIncrease","id","forEach","_id","handleDecrease","handleDelete","window","confirm","index","splice","tranSuccess","payment","paymentID","address","post","alert","length","map","product","images","url","title","description","content"],"mappings":"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","sourcesContent":["import AddCircleIcon from '@material-ui/icons/AddCircle';\r\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle';\r\nimport axios from 'axios';\r\nimport React, { useContext, useEffect, useState } from 'react';\r\nimport { GlobalState } from '../../GlobalState';\r\nimport PaypalButton from '../payment/PaypalButton';\r\n\r\nfunction Cart() {\r\n    const state = useContext(GlobalState);\r\n    const [token] = state.token;\r\n    const [cart, setCart] = state.userApi.cart;\r\n    const [total, setTotal] = useState(0);\r\n \r\n    useEffect(() => {\r\n        const getTotal = () => {\r\n            const total = cart.reduce((prev, item) => {\r\n                return prev + (item.price * item.quantity);\r\n            }, 0);\r\n\r\n            setTotal(total);  \r\n        }\r\n\r\n        getTotal();\r\n    }, [cart]);\r\n\r\n    const addToCart = async (cart) => {\r\n        await axios.patch('/user/addcart', {cart}, {\r\n            headers: {Authorization: token}\r\n        });\r\n    }\r\n\r\n    const handleIncrease = (id) => {\r\n        cart.forEach(item => {\r\n            if (item._id === id) {\r\n                item.quantity += 1;\r\n            }\r\n        });\r\n\r\n        setCart([...cart]);\r\n        addToCart(cart);\r\n    }\r\n\r\n    const handleDecrease = (id) => {\r\n        cart.forEach(item => {\r\n            if (item._id === id) {\r\n                item.quantity === 1 ? item.quantity = 1 : item.quantity -= 1;\r\n            }\r\n        });\r\n\r\n        setCart([...cart]);\r\n        addToCart(cart);\r\n    }\r\n\r\n    const handleDelete = (id) => {\r\n        if (window.confirm(\"Do you want to delete this product?\")) {\r\n            cart.forEach((item, index) => {\r\n                if (item._id === id) {\r\n                    cart.splice(index, 1);\r\n                }\r\n            })\r\n\r\n            setCart([...cart]);\r\n            addToCart(cart);\r\n        }\r\n    }\r\n\r\n    const tranSuccess = async (payment) => {\r\n        const {paymentID, address} = payment;\r\n\r\n        await axios.post('/api/payment', {cart, paymentID, address}, {\r\n            headers: {Authorization: token}\r\n        })\r\n\r\n        setCart([]);\r\n        addToCart([]);\r\n        alert('You have successfully placed an order');\r\n    }\r\n\r\n    if (cart.length === 0) {\r\n        return <h2 className=\"text-center text-2xl\">Cart Empty</h2>\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {\r\n                cart.map(product  => (\r\n                    <div key={product._id} className=\"relative border border-gray-500 rounded\">\r\n                        <img src={product.images.url} alt=\"\" className=\"max-w-md w-full m-5 h-96 object-cover block\"/>\r\n\r\n                        <div className=\"max-w-lg w-full m-5\">\r\n                            <div className=\"flex justify-between items-center\">\r\n                                <h2 className=\"text-3xl uppercase text-blue-700 tracking-widest font-bold\">{product.title}</h2>\r\n                            </div>\r\n\r\n                            <h3>$ {product.price * product.quantity}</h3>\r\n\r\n                            <p className=\"leading-normal my-2.5 opacity-80\">{product.description}</p>\r\n\r\n                            <p className=\"leading-normal my-2.5 opacity-80\">{product.content}</p>\r\n\r\n                            <div className=\"flex items-center\">\r\n                                <RemoveCircleIcon \r\n                                    className=\"cursor-pointer\" \r\n                                    color=\"primary\"  \r\n                                    onClick={() => handleDecrease(product._id)} \r\n                                />\r\n\r\n                                <span className=\"text-red-400 py-0 px-5 text-xl\">{product.quantity}</span>\r\n\r\n                                <AddCircleIcon \r\n                                    className=\"cursor-pointer\" \r\n                                    color=\"primary\" \r\n                                    onClick={() => handleIncrease(product._id)} \r\n                                />\r\n                            </div>\r\n\r\n                            <div \r\n                                className=\"absolute top-0 right-1.5 text-red-400 font-black cursor-pointer\"\r\n                                onClick={() => handleDelete(product._id)}\r\n                            >\r\n                                X\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))\r\n            }\r\n\r\n            <div className=\"w-full h-14 flex items-center justify-between\">\r\n                <h3 className=\"text-red-400\">Total: $ {total}</h3>\r\n                <PaypalButton\r\n                    total={total}\r\n                    tranSuccess={tranSuccess}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Cart\r\n"]},"metadata":{},"sourceType":"module"}